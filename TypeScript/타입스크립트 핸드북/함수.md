# 함수

- 함수의 기본적인 타입 선언
    - 자바스크립트 방식
        
        ```jsx
        function sum(a, b) {
        	return a + b;
        }
        ```
        
    
    - 타입스크립트 방식
        
        ```tsx
        function sum(a: number, b: number): number {
        	return a + b;
        }
        ```
        
- 함수의 인자
    - 함수에 매개변수를 설정하면 `undefined` 나 `null`이라도 인자로 넘겨야하며 컴파일러에서 정의된 매개변수 값이 넘어 왔는지 확인한다. 쉽게 말해, 정의된 매개변수 값만 받을 수 있고 추가로 인자를 받을 수 없다는 의미이다.
        
        ```tsx
        function sum(a: number, b: number): number {
          return a + b;
        }
        
        sum(10, 20); // 30
        sum(10, 20, 30); // error, too many parameters
        sum(10); // error, too few parameters
        ```
        
    - 매개변수의 개수만큼 인자를 넘기기 싫다면 `?`를 이용하면 된다.
        
        ```tsx
        function sum(a: number, b?: number): number {
          return a + b;
        }
        
        sum(10, 20); // 30
        sum(10, 20, 30); // error, too many parameters
        sum(10); // 10
        ```
        
    - 매개변수 초기화
        
        ```tsx
        function sum(a: number, b = '100'): number {
          return a + b;
        }
        
        sum(10, undefined); // 110
        sum(10, 20, 30); // error, too many parameters
        sum(10); // 110
        ```
        
- REST 문법이 적용된 매개변수
    - 자바스크립트의 REST 문법
        - 나머지 매개변수 구문을 이용해 나머지를 rest에 담아서 추출한다.
        
        ```tsx
        function sum(a: number, ...nums: number[]): number {
          const totalOfNums = 0;
          for (let key in nums) {  // rest만 더함
            totalOfNums += nums[key];
          }
          return a + totalOfNums;  // a + nums
        }
        ```
        
- this
    - 타입스크립트에서 자바스크립트의 `this`가 잘못 사용되었을 때 감지할 수 있다.
    - `this`가 가리키는 것을 명시하는 방법
        
        ```tsx
        function 함수명(this: 타입) {
          // ...
        }
        ```
        
    - `this` 적용
        
        ```tsx
        interface Hello {
          el: string;
          count: number;
          init(this: Hello): () => {};
        }
        
        let vm: Hello = {
          el: '#app',
          count: 10,
          init: function(this: Hello) {
            return () => {
              return this.count;
            }
          }
        }
        
        let getCount = vm.init();
        let count = getCount();
        console.log(count); // 10
        ```
        
- 콜백에서의 this
    - 콜백으로 함수가 전달되었을 때의 `this`를 구분해줘야 하는 경우에 강제성 주입 가능하다.
        
        ```tsx
        interface UIElement {
          // 아래 함수의 `this: void` 코드는 함수에 `this` 타입을 선언할 필요가 없다는 의미
          addClickListener(onclick: (this: void, e: Event) => void): void;
        }
        
        // 에러 코드
        class Handler {
            info: string;
            onClick(this: Handler, e: Event) {
                // 위의 `UIElement` 인터페이스의 스펙에 `this`가 필요없다고 했지만 사용했기 때문에 에러가 발생
                this.info = e.message;
            }
        }
        let handler = new Handler();
        uiElement.addClickListener(handler.onClick); // error!
        
        // 에러가 나지 않도록 설정
        class Handler {
            info: string;
            onClick(this: void, e: Event) {
                // `this`의 타입이 void이기 때문에 여기서 `this`를 사용할 수 없습니다.
                console.log('clicked!');
            }
        }
        let handler = new Handler();
        uiElement.addClickListener(handler.onClick);
        ```
